import React, { useState, useEffect, useRef } from 'react';
<div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
    <div className="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl">
        <h3 className="text-lg font-bold mb-4 text-center">{editingReviewId ? 'ë¦¬ë·° ìˆ˜ì •' : 'ë¦¬ë·° ì‘ì„±'}</h3>
        <div className="flex justify-center gap-2 mb-6">{[1, 2, 3, 4, 5].map((star) => (<button key={star} onClick={() => setRating(star)}><Star className={`w-8 h-8 ${star <= rating ? 'text-amber-400 fill-current' : 'text-gray-200'}`} /></button>))}</div>
        <textarea className="w-full bg-gray-50 rounded-xl p-3 text-sm min-h-[100px] border mb-4" value={reviewContent} onChange={(e) => setReviewContent(e.target.value)}></textarea>
        <div className="flex gap-2"><button onClick={() => { setShowReviewModal(false); setEditingReviewId(null); setReviewContent(""); setRating(5); }} className="flex-1 py-3 bg-gray-100 rounded-xl font-bold">ì·¨ì†Œ</button><button onClick={handleSubmitReview} className="flex-1 py-3 bg-primary text-white rounded-xl font-bold">{editingReviewId ? 'ìˆ˜ì •' : 'ë“±ë¡'}</button></div>
    </div>
</div>
                )}

{
    showReportModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
            <div className="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl border-t-4 border-red-500">
                <h3 className="text-lg font-bold text-center mb-4">ì‹ ê³ í•˜ê¸°</h3>
                <p className="text-sm text-gray-500 text-center mb-4">ì‹ ê³  ì‚¬ìœ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>

                {/* Report Reason Selection */}
                <div className="space-y-2 mb-4">
                    {[
                        'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¤ìš”',
                        'ê±´ë¬¼ì£¼ ìš”ì²­ìœ¼ë¡œ ì‚­ì œí•´ì£¼ì„¸ìš”',
                        'ë„ì–´ë½ì´ ìƒê²¼ì–´ìš”',
                        'íœ´ì§€ê°€ ì—†ì–´ìš”',
                        'ë¹„ë°ê°€ ì—†ì–´ìš”',
                        'ê¸°íƒ€'
                    ].map((reason) => (
                        <button
                            key={reason}
                            onClick={() => {
                                setSelectedReportType(reason);
                                if (reason !== 'ê¸°íƒ€') {
                                    setReportReason('');
                                }
                            }}
                            className={`w-full py-3 px-4 rounded-xl font-medium text-sm transition-all ${selectedReportType === reason
                                ? 'bg-red-600 text-white shadow-lg'
                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`}
                        >
                            {reason}
                        </button>
                    ))}
                </div>

                {/* Custom Text Input for "ê¸°íƒ€" */}
                {selectedReportType === 'ê¸°íƒ€' && (
                    <textarea
                        className="w-full bg-red-50 rounded-xl p-3 text-sm min-h-[80px] border border-red-100 mb-4"
                        placeholder="ìƒì„¸ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                        value={reportReason}
                        onChange={(e) => setReportReason(e.target.value)}
                    />
                )}

                <div className="flex gap-2">
                    <button
                        onClick={() => {
                            setShowReportModal(false);
                            setSelectedReportType('');
                            setReportReason('');
                        }}
                        className="flex-1 py-3 bg-gray-100 rounded-xl font-bold"
                    >
                        ì·¨ì†Œ
                    </button>
                    <button
                        onClick={handleReportClick}
                        className="flex-1 py-3 bg-red-600 text-white rounded-xl font-bold"
                    >
                        ì œì¶œ
                    </button>
                </div>
            </div>
        </div>
    )
}

{/* Owner Confirmation Modal */ }
{
    showOwnerConfirmModal && (
        <div className="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
            <div className="bg-white rounded-2xl w-full max-w-sm p-6 shadow-2xl animate-in zoom-in-95 duration-200">
                <div className="flex justify-center mb-4">
                    <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
                        <DoorClosed className="w-8 h-8 text-red-500" />
                    </div>
                </div>
                <h3 className="text-lg font-bold text-center mb-2">ê±´ë¬¼ì£¼ë‹˜, ì‹¬ë ¤ë¥¼ ë¼ì³ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤.</h3>
                <p className="text-gray-600 text-center text-sm mb-6 leading-relaxed">
                    ì •ë§ í™”ì¥ì‹¤ì´ ê¸‰í•œ ì‚¬ëŒë“¤ì„ ìœ„í•´ ë§Œë“  ì„œë¹„ìŠ¤ì´ë‹ˆ ë„ˆë¥¸ ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br /><br />
                    <strong>ì •ë§ ì‚­ì œ ìš”ì²­ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</strong>
                </p>
                <div className="flex gap-2">
                    <button
                        onClick={() => setShowOwnerConfirmModal(false)}
                        className="flex-1 py-3 bg-gray-100 rounded-xl font-bold text-gray-600"
                    >
                        ì·¨ì†Œ
                    </button>
                    <button
                        onClick={() => submitReport('ê±´ë¬¼ì£¼ ìš”ì²­ìœ¼ë¡œ ì‚­ì œí•´ì£¼ì„¸ìš”')}
                        className="flex-1 py-3 bg-red-600 text-white rounded-xl font-bold shadow-lg shadow-red-200"
                    >
                        ì‚­ì œ ìš”ì²­í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    )
}

{/* Reward Modal */ }
{
    showRewardModal.show && (
        <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
            <div className="bg-white rounded-2xl w-full max-w-sm p-8 shadow-2xl animate-in zoom-in-95 duration-300 relative overflow-hidden">
                {/* Confetti Background Effect (Simplified with CSS/SVG) */}
                <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                    <svg className="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                        <circle cx="20" cy="20" r="5" fill="#FBBF24" />
                        <circle cx="80" cy="30" r="7" fill="#3B82F6" />
                        <rect x="40" y="60" width="8" height="8" fill="#EF4444" transform="rotate(45 44 64)" />
                    </svg>
                </div>

                <div className="flex flex-col items-center text-center relative z-10">
                    <div className="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mb-4 shadow-inner">
                        <span className="text-4xl">ğŸ</span>
                    </div>
                    <h3 className="text-xl font-black text-gray-900 mb-2">{showRewardModal.message}</h3>
                    <div className="text-3xl font-bold text-amber-500 mb-6 flex items-center gap-1">
                        +{showRewardModal.points} <span className="text-lg text-gray-400 font-medium">Credits</span>
                    </div>
                    <button
                        onClick={() => setShowRewardModal({ ...showRewardModal, show: false })}
                        className="w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-amber-200 hover:bg-amber-500 transition-colors"
                    >
                        í™•ì¸
                    </button>
                </div>
            </div>
        </div>
    )
}
            </div >
        </div >
    );
};

export default DetailPage;
